<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<title>...</title>
		<meta charset="utf-8">
    <style>
      html, body { margin: 0; padding: 0; border: 0; }
      #c { display: block; } /* kill scrollbars from hell */
    </style>
	</head>
	<body>
		<canvas height="608" style="width: 901px; height: 608px;" width="901" id="c"></canvas>
		<script>
			var a = document.getElementsByTagName('canvas')[0];
			var b = document.body;
      var d = function(e){ return function(){ e.parentNode.removeChild(e); }; }(a);
      // unprefix some popular vendor prefixed things (but stick to their original name)
      var AudioContext =
        window.AudioContext ||
        window.webkitAudioContext;
      var requestAnimationFrame =
        window.requestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(f){ setTimeout(f, 1000/30); };
      // stretch canvas to screen size (once, wont onresize!)
      a.style.width = (a.width = innerWidth) + 'px';
      a.style.height = (a.height = innerHeight) + 'px';

      var c = a.getContext('2d');
		</script>
<script>

/// Global vars
// a: model
a=[];
// b: body
// c: current player (0/1)
c=
// d: game over
d=0;
// e: HTML code
e="<center>";
// i,j,k: loop vars


/// Menu
b.innerHTML="<center>TicTacToe<button style=margin:1em onclick=l(1,1)>1P<button style=margin:1em onclick=l(2,1)>2P</button><br>TicTacToe 3D<button style=margin:1em onclick=l(1,3)>1P<button style=margin:1em onclick=l(2,3)>2P</button><br>4 in a row<button disabled style=margin:1em onclick=m(1)>1P<button style=margin:1em onclick=m(2)>2P</button><br>Othello<button disabled style=margin:1em onclick=n(1)>1P<button disabled style=margin:1em onclick=n(2)>2P";

// Tic tac toe / Tic tac toe 3D
// Init
l = function(p,q){
  
  // Draw the game table
  for(i=q;i--;){
    e+="</table><table border style='cursor:pointer;margin:1em "+i*50+"px 0 0'>";
    for(j=3;j--;){
      e+="<tr>";
      for(k=3;k--;){
        e+="<th width=20 onclick=p(this,"+p+","+(i*9+j*3+k)+") id=t"+(i*9+j*3+k)+">&nbsp;";
      }
    }
  }
  b.innerHTML=e;
}

// Click
p=function(p,q,r){
  if(!d && p.innerHTML == "&nbsp;"){
    
    // Put a mark
    p.innerHTML = c?"X":"O";
    
    // Update model
    a[r] = c?1:-1;
    
    // Won: game over
    if(s(c?3:-3)){
      alert("player " + (c+1) + " won");
      d=1;
    }
    
    // Didn't win: change player
    else{
      c=1-c;
      
      // A.I.
      if(q==1&&c==1){
      
        // Test if A.I can win
        for(i=27;i--;){
          if(!a[i]){
            a[i]=1;
            if(s(3)){
              alert("A.I won");
              d=1;
              document.getElementById("t"+i).innerHTML="X";
              return;
            }
            else{
              a[i]=0;
            }
          }
        }
        
        // Test if P1 can win
        for(i=27;i--;){
          if(!a[i]){
            a[i]=-1;
            if(s(-3)){
              a[i]=1;
              document.getElementById("t"+i).innerHTML="X";
              return;
            }
            else{
              a[i]=0;
            }
          }
        }
        
        // Play randomly
        for(;;){
          if(!a[Math.random()*100|0]){
            a[i]=1;
            document.getElementById("t"+i).innerHTML="X";
            return;
          }
        }
        c=1-c;
      }
    }
  }
}

// Test victory
s=function(p,q){

  // Test if 3 X are aligned
  for(i=3;i--;){
    for(j=3;j--;){
      if(
        // Same cell in the 3 tables
        a[i*3+j]+a[9+i*3+j]+a[18+i*3+j] == p
        
        // Horizontally
        || a[i*9+j*3]+a[i*9+j*3+1]+a[i*9+j*3+2] == p
        
        // Vertically
        || a[i*9+j]+a[i*9+j+3]+a[i*9+j+6] == p
        
        // Diagonally
        || a[i*9]+a[i*9+4]+a[i*9+8] == p
        || a[i*9+2]+a[i*9+4]+a[i*9+6] == p
        
        // Horizontally in 3D
        || a[i*3]+a[9+i*3+1]+a[18+i*3+2] == p
        
        // Vertically in 3D
        || a[i]+a[9+i+3]+a[18+i+6] == p
        
        // Reverse horizontally in 3D
        || a[18+i*3]+a[9+i*3+1]+a[i*3+2] == p
        
        // Reverse vertically in 3D
        || a[18+i]+a[9+i+3]+a[i+6] == p
        
        // Diagonal 3D
        || a[0]+a[13]+a[26]
        || a[2]+a[13]+a[24]
        || a[8]+a[13]+a[18]
        || a[6]+a[13]+a[20]
      ){
      return true;
      }
    }
  }
}

// 4 in a row
// Init
m = function(p,q){
  
  // Draw the game table
  e+="</table><table border style='cursor:pointer;margin:1em'>";
  for(j=6;j--;){
    e+="<tr>";
    for(k=7;k--;){
      e+="<th onclick=q(this,"+(j*7+k)+") width=20>&nbsp;";
    }
  }
  b.innerHTML=e;
}

// Click
q=function(p,q){
  
  if(!d && p.innerHTML == "&nbsp;" && (q<7 || a[q-7])){
    
    // Put a mark
    p.innerHTML = c?"X":"O";
    
    // Update model
    a[q] = c?1:-1;
    
    // Won: game over
    if(t(c?4:-4)){
      alert("player " + (c+1) + " won");
      d=1;
    }
    
    // Didn't win: change player
    else{
      c=1-c;
    }
  }
}


// Test victory
t=function(p,q){
  for(i=6;i--;){
    for(j=7;j--;){
    
      if(
        // Horizontally
        j<4 && a[i*7+j]+a[i*7+j+1]+a[i*7+j+2]+a[i*7+j+3] == p
        
        // Vertically
        || i<3 && a[i*7+j]+a[i*7+j+7]+a[i*7+j+14]+a[i*7+j+21] == p
        
        // Diagonally 1
        || i<3 && j<4 && a[i*7+j]+a[i*7+j+8]+a[i*7+j+16]+a[i*7+j+24] == p
        
        // Diagonally 2
        || i<3 && j>3 && a[i*7+j]+a[i*7+j+6]+a[i*7+j+12]+a[i*7+j+18] == p
      ){
        return true;
      }
    }
  }
}

// Othello
// Init
n = function(p,q){
  
  // Draw the game table
  e+="</table><table border style='cursor:pointer;margin:1em'>";
  for(j=8;j--;){
    e+="<tr>";
    for(k=8;k--;){
      e+="<th onclick=r(this,"+(j*7+k)+") width=20>"+(j==3&&k==3||j==4&&k==4?"X":j==3&&k==4||j==4&&k==3?"O":"&nbsp;");
    }
  }
  b.innerHTML=e;
}

// click
r=function(p,q){
  
  
}

// Test victory
u=function(p,q){

}

</script>
	

</body></html>