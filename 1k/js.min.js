b.innerHTML="<center><p><button onclick=g(1,3,3,f=1)>XnO<button onclick=g(3,3,3,f=1)>XnO3D<button onclick=g(1,6,7,f=2)>Find4<button onclick=g(1,8,8,f=0)>Reversi</button><p id=B><p id=C><p id=D>",g=function(b,g,h,m){f=m;for(c=e=1,i=0,d=[],f||(d[27]=d[36]=-1,d[28]=d[35]=1),B.innerHTML="";b--;){for(a="<br><table border>",j=g;j--;)for(a+="<tr>",k=h;k--;)d[i]=d[i]||0,a+="<th width=20 onclick=m(this,"+[i,7-j,7-k]+") id=t"+i+">"+"X.O"[d[i++]+1];B.innerHTML+=a}C.innerHTML="O",D.innerHTML=f?"":"X=O <button onclick=c=-c;C.innerHTML='XnO'[c+1]>pass"},m=function(b,g,h,m){if(e&&!d[g]){if(f)if(1==f){for(b.innerHTML="XnO"[c+1],a=3*(d[g]=c),i=3;i--;)for(j=3;j--;)if(d[9*i+j]+d[9*i+j+3]+d[9*i+j+6]==a||d[9*i+3*j]+d[9*i+3*j+1]+d[9*i+3*j+2]==a||d[9*i+0]+d[9*i+4]+d[9*i+8]==a||d[9*i+2]+d[9*i+4]+d[9*i+6]==a||d[3*i]+d[9+3*i+1]+d[18+3*i+2]==a||d[3*i+2]+d[9+3*i+1]+d[18+3*i]==a||d[i]+d[9+i+3]+d[18+i+6]==a||d[i+6]+d[9+i+3]+d[18+i]==a||d[13]+d[0]+d[26]==a||d[13]+d[2]+d[24]==a||d[13]+d[8]+d[18]==a||d[13]+d[6]+d[20]==a||d[3*i+j]+d[9+3*i+j]+d[18+3*i+j]==a)return e&=C.innerHTML="XnO"[c+1]+" won"}else{if(2!=f||!(g>34||d[g+7]))return;for(b.innerHTML="XnO"[c+1],a=4*(d[g]=c),i=6;i--;)for(j=7;j--;)if(b=i*7+j,4>j&&d[b]+d[b+1]+d[b+2]+d[b+3]==a||3>i&&d[b]+d[b+7]+d[b+14]+d[b+21]==a||3>i&&4>j&&d[b]+d[b+8]+d[b+16]+d[b+24]==a||3>i&&j>2&&d[b]+d[b+6]+d[b+12]+d[b+18]==a)return e&=C.innerHTML="XnO"[c+1]+" won"}else{for(q=0,v=2;~v--;)for(u=2;~u--;)if(u|v&&(p=0,d[8*(h+v)+m+u]==-c)){for(i=h+v,j=m+u;~i&&9>i&&~j&&9>j;i+=v,j+=u){if(d[8*i+j]==c){p=q=1;break}if(!d[8*i+j])break}if(p)for(k=h,l=m;k!=i||l!=j;k+=v,l+=u)this["t"+(8*k+l)].innerHTML="XnO"[c+1],d[8*k+l]=c}u=0;for(i in d)u+=d[i];if(!q)return;D.innerHTML=(u?u>0?"O>X":"X>O":"X=O")+(!~d.indexOf(0)?"":" <button onclick=c=-c;C.innerHTML='XnO'[c+1]>pass")}c=-c,C.innerHTML="XnO"[c+1],!~d.indexOf(0)&&(e&=C.innerHTML=f?"Draw":"")}}